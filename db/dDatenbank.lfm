object dmMain: TdmMain
  OldCreateOrder = False
  Height = 779
  HorizontalOffset = 0
  VerticalOffset = 0
  Width = 643
  object cDatenbank: TUniConnection
    Connected = True
    ProviderName = 'InterBase'
    Database = '/database/livia.fdb'
    Username = 'sysdba'
    Server = 'hydbdev1'
    Left = 528
    Top = 88
    EncryptedPassword = '8CFF93FF8AFFCFFFCEFF'
  end
  object qAdressen: TUniQuery
    Connection = cDatenbank
    SQL.Strings = (
      'SELECT ID,'
      '       ALBUM,'
      '       ARTIST,'
      '       RELEASEYEAR,'
      '       DESCRIPTION,'
      '       ALBUMCOVER,'
      '       USERID'
      'FROM Album'
      'WHERE USERID = :UID;'
    )
    FilterOptions = []
    Left = 104
    Top = 88
    ParamData = <    
      item
        DataType = ftUnknown
        Name = 'UID'
      end>
  end
  object sqAdressen: TUniDataSource
    DataSet = qAdressen
    Left = 207
    Top = 88
  end
  object qSongs: TUniQuery
    Connection = cDatenbank
    SQL.Strings = (
      'SELECT s.ID, '
      '       s.SONGTITLE, '
      '       s.DURATION, '
      '       a.ID, '
      '       s.ALBUMID, '
      '       a.ARTIST, '
      '       a.RELEASEYEAR,  '
      '       a.ALBUMCOVER,'
      '       s.LYRICS'
      'FROM Songs s'
      'JOIN Album a ON s.ALBUMID = a.ID'
      'WHERE s.ALBUMID = :ALBUMID'
    )
    FilterOptions = []
    Left = 104
    Top = 184
    ParamData = <    
      item
        DataType = ftUnknown
        Name = 'ALBUMID'
      end>
  end
  object sqSongs: TUniDataSource
    DataSet = qSongs
    Left = 207
    Top = 184
  end
  object qUsersLogin: TUniQuery
    Connection = cDatenbank
    SQL.Strings = (
      'SELECT ID,'
      '       PWDHASH'
      'FROM USERS'
      'WHERE TRIM(USERNAME) = TRIM(:USERNAME)'
      ''
    )
    FilterOptions = []
    Left = 104
    Top = 288
    ParamData = <    
      item
        DataType = ftString
        Name = 'USERNAME'
        ParamType = ptInput
      end>
  end
  object InterBaseUniProvider1: TInterBaseUniProvider
    Left = 528
    Top = 192
  end
  object qUsersRegister: TUniQuery
    Connection = cDatenbank
    SQL.Strings = (
      'SELECT ID FROM USERS'
      'WHERE TRIM(USERNAME) = TRIM(:USERNAME)'
      '   OR TRIM(EMAIL) = TRIM(:EMAIL)'
    )
    FilterOptions = []
    Left = 207
    Top = 288
    ParamData = <    
      item
        DataType = ftString
        Name = 'USERNAME'
        ParamType = ptInput
      end    
      item
        DataType = ftString
        Name = 'EMAIL'
        ParamType = ptInput
      end>
  end
  object qUsersInsert: TUniQuery
    Connection = cDatenbank
    SQL.Strings = (
      'INSERT INTO USERS (USERNAME, EMAIL, PWDHASH)'
      'VALUES (:USERNAME, :EMAIL, :PWDHASH)'
    )
    FilterOptions = []
    Left = 104
    Top = 384
    ParamData = <    
      item
        DataType = ftString
        Name = 'USERNAME'
        ParamType = ptInput
      end    
      item
        DataType = ftString
        Name = 'EMAIL'
        ParamType = ptInput
      end    
      item
        DataType = ftUnknown
        Name = 'PWDHASH'
      end>
  end
  object qUserCheckExists: TUniQuery
    Connection = cDatenbank
    SQL.Strings = (
      'SELECT ID FROM USERS'
      'WHERE TRIM(USERNAME) = TRIM(:USERNAME)'
      '  OR TRIM(EMAIL) = TRIM(:EMAIL)'
      ''
    )
    FilterOptions = []
    Left = 207
    Top = 384
    ParamData = <    
      item
        DataType = ftUnknown
        Name = 'USERNAME'
      end    
      item
        DataType = ftUnknown
        Name = 'EMAIL'
      end>
  end
end
